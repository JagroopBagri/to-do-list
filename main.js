(()=>{"use strict";function e(){document.querySelector(".task-modal-container").style.display="flex"}function t(){document.querySelector(".task-modal-container").style.display="none"}function r(e){return e.createTaskButton=document.querySelector(".create-task"),e.taskModalContent=document.querySelector(".task-modal-content"),e.errorMessage=document.createElement("div"),e.errorMessage.classList.add("error"),e.errorMessage.textContent="Please complete every field",e.taskModalContent.insertBefore(e.errorMessage,e.createTaskButton),0}function i(e){return e.errorMessage&&(e.errorMessage.remove(),delete e.errorMessage),0}function n(e){i(e),e.taskTextValue=document.querySelector("#task-input").value,e.taskPriorityValue=document.querySelector("#priority-input").value,e.taskDueDateValue=document.querySelector("#dueDate-input").value}function a(e){e.tasksContainer=document.querySelector(".tasks"),e.tasksContainer&&e.tasksContainer.remove(),e.tasksContainer=document.createElement("div"),e.tasksContainer.classList.add("tasks"),e.contentContainer=document.querySelector("#content"),e.contentContainer.appendChild(e.tasksContainer),e.tasksArray.forEach((t=>t.listNumber===e.currentListNumber&&-1!=e.currentListNumber?(e.individualTaskContainer=document.createElement("div"),e.individualTaskContainer.classList.add("list"+t.listNumber+"-task"+t.number),e.individualTaskContainer.classList.add("task"),e.individualTaskContainer.id="task"+t.number,e.tasksContainer.appendChild(e.individualTaskContainer),e.taskBeginning=document.createElement("div"),e.taskBeginning.classList.add("task-beginning"),e.individualTaskContainer.appendChild(e.taskBeginning),e.taskEnding=document.createElement("div"),e.taskEnding.classList.add("task-ending"),e.individualTaskContainer.appendChild(e.taskEnding),e.priorityDiv=document.createElement("div"),e.priorityDiv.classList.add("priority"),e.taskBeginning.appendChild(e.priorityDiv),e.priority=document.createElement("div"),e.priority.classList.add(t.priority),e.priority.id="priority"+t.number,e.priority.textContent="•",e.priorityDiv.appendChild(e.priority),e.textDiv=document.createElement("div"),e.textDiv.classList.add("item-content"),e.taskBeginning.appendChild(e.textDiv),e.text=document.createElement("div"),e.text.classList.add("task-item"),e.text.id="task-text"+t.number,e.text.textContent=t.text,e.textDiv.appendChild(e.text),e.editDiv=document.createElement("div"),e.editDiv.classList.add("edit"),e.editDiv.id="task-edit"+t.number,e.editDiv.textContent="✎",e.taskEnding.appendChild(e.editDiv),e.delDiv=document.createElement("div"),e.delDiv.classList.add("del"),e.delDiv.id="task-del"+t.number,e.delDiv.textContent="✖",e.taskEnding.appendChild(e.delDiv),e.dueDiv=document.createElement("div"),e.dueDiv.classList.add("dueDate"),e.dueDiv.id="task-due"+t.number,e.dueDiv.textContent=t.dueDate,e.taskEnding.appendChild(e.dueDiv),0):1))}function s(e){function t(){let t=Number(this.id.replace(/[^0-9]/g,"")),r=e.tasksArray.findIndex((e=>e.number===t));document.querySelector("#task"+t).remove(),e.tasksArray.splice(r,1),localStorage.setItem("taskArray",JSON.stringify(e.tasksArray))}e.delDivs=Array.from(document.querySelectorAll(".del")),e.delDivs.forEach((e=>{e.removeEventListener("click",t),e.addEventListener("click",t)}))}function l(i){function a(){let a=Number(this.id.replace(/[^0-9]/g,"")),s=i.tasksArray.findIndex((e=>e.number===a));document.querySelector("#task-input").value=i.tasksArray[s].text,document.querySelector("#dueDate-input").value=i.tasksArray[s].dueDate,document.querySelector("#priority-input").value=i.tasksArray[s].priority,document.querySelector(".create-task").textContent="Edit Task",e();let l=document.querySelector(".cancel-task"),o=document.querySelector(".create-task");function c(){t(),l.removeEventListener("click",c),o.removeEventListener("click",u)}function u(){if(n(i),""===i.taskTextValue||"none"===i.taskPriorityValue||""===i.taskDueDateValue)return r(i),1;l.removeEventListener("click",c),o.removeEventListener("click",u),i.tasksArray[s].text=i.taskTextValue,i.tasksArray[s].priority=i.taskPriorityValue,i.tasksArray[s].dueDate=i.taskDueDateValue,document.querySelector("#priority"+i.tasksArray[s].number).className=i.tasksArray[s].priority,document.querySelector("#task-text"+i.tasksArray[s].number).textContent=i.tasksArray[s].text,document.querySelector("#task-due"+i.tasksArray[s].number).textContent=i.tasksArray[s].dueDate,t()}l.addEventListener("click",c),o.addEventListener("click",u)}i.editDivs=Array.from(document.querySelectorAll(".edit")),i.editDivs.forEach((e=>{e.removeEventListener("click",a),e.addEventListener("click",a)}))}function o(){document.querySelector(".list-modal-container").style.display="none"}function c(e){return e.listErrorMessage&&(e.listErrorMessage.remove(),delete e.listErrorMessage),0}function u(e){e.listsContainer=document.querySelector(".lists"),e.listsContainer&&e.listsContainer.remove(),e.listsContainer=document.createElement("div"),e.listsContainer.classList.add("lists"),e.contentContainer=document.querySelector("#content"),e.contentContainer.prepend(e.listsContainer),e.listsArray.forEach((t=>{e.individualListContainer=document.createElement("div"),e.individualListContainer.classList.add("list-container"),e.individualListContainer.id="listcontainer"+t.number,e.listsContainer.appendChild(e.individualListContainer),e.listDelDiv=document.createElement("div"),e.listDelDiv.classList.add("del-list"),e.listDelDiv.id="del"+t.number,e.listDelDiv.textContent="−",e.individualListContainer.appendChild(e.listDelDiv),e.listNameDiv=document.createElement("div"),e.listNameDiv.classList.add("list-item"),e.listNameDiv.id="list"+t.number,e.listNameDiv.textContent=t.name,e.individualListContainer.appendChild(e.listNameDiv)}))}function d(e){function t(){let t=Number(this.id.replace(/[^0-9]/g,"")),r=e.listsArray.findIndex((e=>e.number===t));if(document.querySelector("#listcontainer"+t).remove(),e.listsArray[r].number===e.currentListNumber){if(e.listsArray.splice(r,1),localStorage.setItem("listArray",JSON.stringify(e.listsArray)),0!=e.listsArray.length)return e.currentListNumber=e.listsArray[e.listsArray.length-1].number,m(e),a(e),s(e),l(e),0;e.currentListNumber=-1,m(e),a(e)}else e.listsArray.splice(r,1),localStorage.setItem("listArray",JSON.stringify(e.listsArray))}e.listDelDivs=Array.from(document.querySelectorAll(".del-list")),e.listDelDivs.forEach((e=>{e.removeEventListener("click",t),e.addEventListener("click",t)}))}function m(e){-1!==e.currentListNumber?e.listsArray.forEach((t=>t.number===e.currentListNumber?(document.querySelector(".current-list-title").textContent=t.name,0):1)):document.querySelector(".current-list-title").textContent="Please select or make a list to add tasks"}function y(e){function t(){let t=Number(this.id.replace(/[^0-9]/g,""));return e.currentListNumber=t,m(e),a(e),s(e),l(e),0}e.listItems=Array.from(document.querySelectorAll(".list-item")),e.listItems.forEach((e=>{e.removeEventListener("click",t),e.addEventListener("click",t)}))}!function(){const k={};!function(e){localStorage.getItem("taskArray")?e.tasksArray=JSON.parse(localStorage.getItem("taskArray")):e.tasksArray=[{listNumber:0,number:0,text:"Call the Office",priority:"high",dueDate:"2022-01-13"}],localStorage.getItem("listArray")?e.listsArray=JSON.parse(localStorage.getItem("listArray")):e.listsArray=[{name:"General",number:0}],e.listItems=Array.from(document.querySelectorAll(".list-item")),e.taskItems=Array.from(document.querySelectorAll(".task")),0===e.listsArray.length?e.currentListNumber=-1:e.currentListNumber=e.listsArray[0].number,0===e.tasksArray.length?e.taskID=0:e.taskID=function(){let t=e.tasksArray.map((e=>e.number)).reduce(((e,t)=>(t>e&&(e=t),e)));return Number(t)}(),0===e.listsArray.length?e.listID=0:e.listID=function(){let t=e.listsArray.map((e=>e.number)).reduce(((e,t)=>(t>e&&(e=t),e)));return Number(t)}(),e.addTaskButton=document.querySelector(".addTask"),e.addListButton=document.querySelector(".addList"),!1===localStorage.getItem("taskArray")&&localStorage.setItem("taskArray",JSON.stringify(e.tasksArray)),!1===localStorage.getItem("listArray")&&localStorage.setItem("listArray",JSON.stringify(e.listsArray))}(k),m(k),u(k),d(k),y(k),a(k),s(k),l(k),o(),k.addTaskButton.addEventListener("click",(function(){if(console.log(k.tasksArray),-1===k.currentListNumber)return alert("ERROR: Please select or add a list to add tasks"),1;document.querySelector("#task-input").value="",document.querySelector("#dueDate-input").value="",document.querySelector("#priority-input").value="none",document.querySelector(".create-task").textContent="Create Task",i(k),e();let o=document.querySelector(".cancel-task"),c=document.querySelector(".create-task");function u(){t(),o.removeEventListener("click",u),c.removeEventListener("click",d)}function d(){if(n(k),0===function(e){return""===e.taskTextValue||"none"===e.taskPriorityValue||""===e.taskDueDateValue?(r(e),1):(e.tasksContainer=document.querySelector(".tasks"),e.taskID++,e.tasksArray[e.tasksArray.length]={listNumber:e.currentListNumber,number:e.taskID,text:e.taskTextValue,priority:e.taskPriorityValue,dueDate:e.taskDueDateValue},localStorage.setItem("taskArray",JSON.stringify(e.tasksArray)),0)}(k))return c.removeEventListener("click",d),o.removeEventListener("click",u),t(),a(k),s(k),l(k),0}o.addEventListener("click",u),c.addEventListener("click",d)})),k.addListButton.addEventListener("click",(function(){document.querySelector("#list-name").value="",c(k),document.querySelector(".list-modal-container").style.display="flex";let e=document.querySelector(".cancel-list"),t=document.querySelector(".create-list");function r(){o(),e.removeEventListener("click",r),t.removeEventListener("click",i)}function i(){if(function(e){c(e),e.listNameValue=document.querySelector("#list-name").value}(k),0===function(e){return""===e.listNameValue?(function(e){e.createListButton=document.querySelector(".create-list"),e.listModalContent=document.querySelector(".list-modal-content"),e.listErrorMessage=document.createElement("div"),e.listErrorMessage.classList.add("error"),e.listErrorMessage.textContent="Please input a list name",e.listModalContent.insertBefore(e.listErrorMessage,e.createListButton)}(e),1):(e.listsContainer=document.querySelector(".lists"),e.listID++,e.listsArray[e.listsArray.length]={name:e.listNameValue,number:e.listID},localStorage.setItem("listArray",JSON.stringify(e.listsArray)),0)}(k))return t.removeEventListener("click",i),e.removeEventListener("click",r),1===k.listsArray.length&&(k.currentListNumber=k.listsArray[0].number),m(k),a(k),s(k),l(k),o(),u(k),d(k),y(k),0}e.addEventListener("click",r),t.addEventListener("click",i)}))}()})();